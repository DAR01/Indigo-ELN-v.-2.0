<div class="panel panel-info">
    <div class="panel-heading">Preview Experiment {{notebook.name + '-' + experiment.name}}</div>
    <div class="panel-body panel-experiment-preview">
        <form name="print-form" id="print-form" role="form" novalidate>
            <!--HEADER-->
            <div class="row print-component">
                <div class="col-xs-12">
                    <table class="print-header">
                        <tr>
                            <th colspan="2">
                                <h2>CONFIDENTIAL</h2></th>
                            <th colspan="2">
                                <div class="logo"></div>
                            </th>
                        </tr>
                        <tr>
                            <td style="width:20%">Author:</td>
                            <td style="width:30%">{{experiment.author.firstName + ' ' +
                                experiment.author.lastName}}
                            </td>
                            <td style="width:20%">Notebook&nbsp;Experiment:</td>
                            <td style="width:30%">{{notebook.name + '-' + experiment.name}}</td>
                        </tr>
                        <tr>
                            <td>Co-authors:</td>
                            <td>
                                <!--to be added in details-->
                                                    <span ng-repeat="user in experiment.coAuthors track by user.id">
                                                        {{user.firstName + ' ' + user.lastName}}<span
                                                            ng-if="!$last">, </span></span></td>
                            <td>Status:</td>
                            <td>{{experiment.status | uppercase }}</td>
                        </tr>
                        <tr>
                            <td>Project</td>
                            <td>{{project.name}}
                            <td>Printed Page:</td>
                            <td>x{{}} of y{{}}</td><!--think about-->
                        </tr>
                        <tr>
                            <!--Experiment Subject / Title in Reaction Details and in Concept Subject / Title-->
                            <!--what if no such component?-->
                            <td>Subject/Title</td>
                            <td>{{reactionDetails.title || conceptDetails.title}}</td>
                            <td>Printed Date:</td>
                            <td>{{currentDate | date:'MMM DD, YYYY HH:mm:ss z'}}</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!--EXPERIMENT DETAILS-->
            <div class="row print-component" ng-if="reactionDetails">
                <div class="col-xs-1 need-to-print" ng-init="reactionDetails.needToPrint = true">
                    <my-checkbox
                            my-label="Print"
                            my-model="reactionDetails.needToPrint"
                            my-name="needToPrint"
                            my-disabled="fullPrint"></my-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">EXPERIMENT DETAILS</strong>
                    <table style="border: 1px black solid" class="print-table-simple">
                        <tr>
                            <th style="width:20%">Creation Date:</th>
                            <td style="width:30%">{{experiment.creationDate | date:'MMM DD, YYYY
                                HH:mm:ss z'}}
                            </td>
                            <th style="width:20%">Therapeutic&nbsp;Area:</th>
                            <td style="width:30%">{{reactionDetails.therapeuticArea.name}}</td>
                        </tr>
                        <tr>
                            <th>Continued From:</th>
                            <td>{{reactionDetails.contFromRxn}}</td>
                            <th>Project Code:</th>
                            <td>{{reactionDetails.codeAndName.name}}</td>
                        </tr>
                        <tr>
                            <th>Continued To:</th>
                            <td>{{reactionDetails.contToRxn}}</td>
                            <th>Project Alias</th>
                            <td>{{reactionDetails.projectAliasName}}</td>
                        </tr>
                        <tr>
                            <th>Linked&nbsp;Experiment:</th>
                            <td>{{reactionDetails.linkedExperiment}}</td>
                            <th>Literature&nbsp;Reference:</th>
                            <td>{{reactionDetails.literature}}</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!--EXPERIMENT DESCRIPTION-->
            <div class="row print-component" ng-if="experimentDescription">
                <div class="col-xs-1 need-to-print" ng-init="experimentDescription.needToPrint = true">
                    <my-checkbox
                            my-label="Print"
                            my-model="experimentDescription.needToPrint"
                            my-name="needToPrint"
                            my-disabled="fullPrint"></my-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">EXPERIMENT DESCRIPTION</strong>
                    <my-text-editor my-model="experimentDescription.description"
                                    my-name="experimentDescription"
                                    my-readonly="true"></my-text-editor>
                </div>
            </div>

            <!--SUMMARY REACTION-->
            <div class="row print-component" ng-if="reaction">
                <div class="col-xs-1 need-to-print" ng-init="reaction.needToPrint = true">
                    <my-checkbox
                            my-label="Print"
                            my-model="reaction.needToPrint"
                            my-name="needToPrint"
                            my-disabled="fullPrint"></my-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">REACTION SCHEME</strong>
                    <table class="print-table">
                        <tr>
                            <td><img style=" "
                                     class="img-responsive center-block"
                                     ng-src="data:image/svg+xml;base64,{{reaction.image}}" alt="Image is unavailable.">
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <!--STOICHIOMETRY-->
            <div class="row print-component" ng-if="stoichTable">
                <div class="col-xs-1 need-to-print" ng-init="stoichTable.needToPrint = true">
                    <my-checkbox
                            my-label="Print"
                            my-model="stoichTable.needToPrint"
                            my-name="needToPrint"
                            my-disabled="fullPrint"></my-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">STOICHIOMETRY</strong>
                    <table class="print-table">
                        <tr>
                            <th style="width:30%">Reagent</th>
                            <th style="width:8%">Mol Wgh</th>
                            <th style="width:8%">Weight</th>
                            <th style="width:8%">Moles</th>
                            <th style="width:8%">Volume</th>
                            <th style="width:8%">EQ</th>
                            <th style="width:30%">Other Information</th>
                        </tr>
                        <tr ng-repeat="reactant in stoichTable.reactants track by $index">
                            <td>
                                <div><img ng-if="reactant.structure.image"
                                          class="img-responsive"
                                          style="height:100px;"
                                          ng-src="data:image/svg+xml;base64,{{reactant.structure.image}}"
                                          alt="Image is unavailable."></div>
                                <p>{{reactant.fullNbkBatch}}</p></td>
                            <td>{{reactant.molWeight.value | round}}</td>
                            <td>{{reactant.weight.value + ' ' + reactant.weight.unit}}</td>
                            <td>{{reactant.mol.value + ' ' + reactant.mol.unit}}</td>
                            <td>{{reactant.volume.value + ' ' + reactant.volume.unit}}</td>
                            <td>???</td>
                            <td>
                                <table class="print-table-inner">
                                    <tr>
                                        <td style="width:40%">Name:</td>
                                        <td>{{reactant.chemicalName}}</td>
                                    </tr>
                                    <tr>
                                        <td>Rxn Role:</td>
                                        <td>{{reactant.rxnRole.name}}</td>
                                    </tr>
                                    <tr>
                                        <td>Purity:</td>
                                        <td>{{reactant.purity}}</td>
                                    </tr>
                                    <tr>
                                        <td>Molarity:</td>
                                        <td>{{reactant.molarity.value + ' ' + reactant.molarity.unit}}</td>
                                    </tr>
                                    <tr>
                                        <td>Hazard:</td>
                                        <td>{{reactant.hazardComments}}</td>
                                    </tr>
                                    <tr>
                                        <td>Comments:</td>
                                        <td>{{reactant.comments}}</td>
                                    </tr>
                                    <tr>
                                        <td>Salt Code:</td>
                                        <td>{{reactant.saltCode.name}}</td>
                                    </tr>
                                    <tr>
                                        <td>Salt EQ:</td>
                                        <td>{{reactant.saltEq}}</td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <!--BATCH INFORMATION-->
            <div class="row print-component" ng-if="batchSummary">
                <div class="col-xs-1 need-to-print" ng-init="batchSummary.needToPrint = true">
                    <my-checkbox
                            my-label="Print"
                            my-model="batchSummary.needToPrint"
                            my-name="needToPrint"
                            my-disabled="fullPrint"></my-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">BATCH INFORMATION</strong>
                    <table class="print-table">
                        <tr>
                            <th style="width:10%">Nbk Batch</th>
                            <th style="width:20%">Structure</th>
                            <th style="width:10%">Amount Made</th>
                            <th style="width:10%">Theoretical Yield</th>
                            <th style="width:10%">Purity (%) Determined By</th>
                            <th>Batch Information</th>
                        </tr>
                        <tr ng-repeat="batch in batchSummary.batches track by $index">
                            <td>{{batch.nbkBatch}}</td>
                            <td>
                                <div><img ng-if="batch.structure.image"
                                          class="img-responsive"
                                          style="height:100px;"
                                          ng-src="data:image/svg+xml;base64,{{batch.structure.image}}"
                                          alt="Image is unavailable."></div>
                            </td>
                            <td>???</td>
                            <td>???</td>
                            <td>{{batch.purity.asString}}</td>
                            <td>
                                <table class="print-table-inner">
                                    <tr>
                                        <td style="width:40%">Mol Wgt:</td>
                                        <td>{{batch.molWeight.value | round}}</td>
                                    </tr>
                                    <tr>
                                        <td>Exact Mass:</td>
                                        <td>???</td>
                                    </tr>
                                    <tr>
                                        <td>Salt Code:</td>
                                        <td>{{batch.saltCode.name}}</td>
                                    </tr>
                                    <tr>
                                        <td>Salt EQ:</td>
                                        <td>{{batch.saltEq}}</td>
                                    </tr>
                                    <tr>
                                        <!--add field?-->
                                        <td>Batch Owner:</td>
                                        <td>{{}}</td>
                                    </tr>
                                    <tr>
                                        <td>Comments:</td>
                                        <td>{{batch.comments}}</td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <!--REGISTRATION SUMMARY--> <!--no such component-->
            <div class="row print-component" ng-if="true">
                <div class="col-xs-1 need-to-print"
                     ng-init="registrationSummary.needToPrint = true">
                    <my-checkbox
                            my-label="Print"
                            my-model="registrationSummary.needToPrint"
                            my-name="needToPrint"
                            my-disabled="fullPrint"></my-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">REGISTRATION SUMMARY</strong>
                    <table class="print-table">
                        <tr>
                            <th style="width:40%">Nbk Batch</th>
                            <th>Total Amount Made</th>
                            <th>Registration Status</th>
                            <th>Conversational Batch</th>
                        </tr>
                        <tr>  <!--ng-repeat=""-->
                            <td>11111111-0011-001</td>
                            <td>25 mg</td>
                            <td>PASS</td>
                            <td>STR-00000091-01-001</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!--BATCH DETAILS-->
            <div class="row print-component">
                <div class="col-xs-1 need-to-print" ng-init="batchDetails.needToPrint = true">
                    <my-checkbox
                            my-label="Print"
                            my-model="batchDetails.needToPrint"
                            my-name="needToPrint"
                            my-disabled="fullPrint"></my-checkbox>
                </div>
                <div class="col-xs-11" ng-if="batchDetails">
                    <strong class="pull-right">BATCH DETAILS</strong>
                    <table class="print-table">
                        <tr>
                            <th style="width:20%">For Notebook Batch:</th>
                            <th>
                                <span class="pull-left">&nbsp; {{batchDetails.fullNbkBatch}}</span>
                                <span class="pull-right">#barcode &nbsp;</span>
                            </th>
                        </tr>
                        <tr>
                            <!--no such field!-->
                            <td>Registered Date</td>
                            <td>{{}}</td>
                        </tr>
                        <tr>
                            <td>Structure Comments</td>
                            <td>{{batchDetails.structureComments}}</td>
                        </tr>
                        <tr>
                            <td>Compound Source</td>
                            <td>{{batchDetails.source.name}}</td>
                        </tr>
                        <tr>
                            <td>Source Detail</td>
                            <td>{{batchDetails.sourceDetail.name}}</td>
                        </tr>
                        <tr>
                            <!--no such field!-->
                            <td>Batch Owner</td>
                            <td>{{}}</td>
                        </tr>
                        <tr>
                            <!--no such field!-->
                            <td>Synthesized By</td>
                            <td>{{}}</td>
                        </tr>
                        <tr>
                            <!--no such field!-->
                            <td>Lab Site</td>
                            <td>{{}}</td>
                        </tr>
                        <tr>
                            <!--no model-->
                            <td>Calculated Batch MW</td>
                            <td>{{}}</td>
                        </tr>
                        <tr>
                            <!--no such field!-->
                            <td>Calculated Parent MW</td>
                            <td>{{}}</td>
                        </tr>
                        <tr>
                            <td>Residual Solvents</td>
                            <td>{{batchDetails.residualSolvents.asString}}</td>
                        </tr>
                        <tr>
                            <td>Solubility in Solvents</td>
                            <td>{{batchDetails.solubilitySolvents.asString}}</td>
                        </tr>
                        <tr>
                            <!--no model-->
                            <td>Calculated Batch MF</td>
                            <td>{{}}</td>
                        </tr>
                        <tr>
                            <!--no such field!-->
                            <td>Calculated Parent MF</td>
                            <td>{{}}</td>
                        </tr>
                        <tr>
                            <td>Precursor/Reactant IDs</td>
                            <td>{{batchDetails.precursors}}</td>
                        </tr>
                        <tr>
                            <td>External Supplier</td>
                            <td>{{batchDetails.externalSupplier.asString}}</td>
                        </tr>
                        <tr>
                            <td>Hazards</td>
                            <td>{{batchDetails.healthHazards.asString}}</td>
                        </tr>
                        <tr>
                            <td>Handling</td>
                            <td>{{batchDetails.handlingPrecautions.asString}}</td>
                        </tr>
                        <tr>
                            <td>Storage</td>
                            <td>{{batchDetails.storageInstructions.asString}}</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!--CONCEPT DETAIL-->
            <div class="row print-component" ng-if="conceptDetails">
                <div class="col-xs-1 need-to-print" ng-init="conceptDetails.needToPrint = true">
                    <my-checkbox
                            my-label="Print"
                            my-model="conceptDetails.needToPrint"
                            my-name="needToPrint"
                            my-disabled="fullPrint"></my-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">CONCEPT DETAILS</strong>
                    <table style="border: 1px black solid"
                           class="print-table-simple">
                        <tr>
                            <th style="width:20%">Therapeutic&nbsp;Area:</th>
                            <td style="width:30%">{{conceptDetails.therapeuticArea.name}}</td>
                            <th style="width:20%">Creation Date:</th>
                            <td style="width:30%">{{experiment.creationDate | date:'MMM DD, YYYY
                                HH:mm:ss z'}}
                            </td>
                        </tr>
                        <tr>
                            <th>Project Code:</th>
                            <td>{{conceptDetails.codeAndName.name}}</td>
                            <th>Inventors:</th>   <!--Inventors: author + coauthors ?-->
                            <td></td>
                        </tr>
                        <tr>
                            <th>Concept Keywords:</th>
                            <td>{{conceptDetails.keywords}}</td>
                            <th>Designers</th>
                            <td>{{conceptDetails.designers}}</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!--PREFERRED COMPOUNDS-->
            <!--no such component yet ? concept(no fields), product-batch-summary?-->
            <div class="row print-component" ng-if="true">
                <div class="col-xs-1 need-to-print" ng-init="preferredCompounds.needToPrint = true">
                    <my-checkbox
                            my-label="Print"
                            my-model="preferredCompounds.needToPrint"
                            my-name="needToPrint"
                            my-disabled="fullPrint"></my-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">PREFERRED COMPOUNDS</strong>
                    <table class="print-table">
                        <tr>
                            <th>Structure</th>
                            <th>Notebook Batch #</th>
                            <th>Mol Weight</th>
                            <th>Mol Formula</th>
                            <th>Structure Comments</th>
                        </tr>
                        <tr>  <!--ng-repeat=""-->
                            <td>#image<br>#stereoisomer_code<br>#virtual_compound_id</td>
                            <td>11111111-0007-001</td>
                            <td>283.4 mg</td>
                            <td>C17 H21 N3 O</td>
                            <td>comments</td>
                        </tr>
                    </table>
                </div>
            </div>
        </form>


    </div>

    <div class="btn-bottom-block tab-content-pad experiment-preview-block" style="">

        <button ng-click="print(experiment)" ng-if="!fullPrint" ng-disabled="print-form.$invalid"
                class="btn btn-primary">
            <span class="fa fa-print"></span><span class="m-l5">Print</span>
        </button>
        <button ng-click="submit()" ng-if="fullPrint" ng-disabled="print-form.$invalid || isPrinting"
                class="btn btn-info">
            <i class="fa fa-save"></i><span class="m-l5">Submit</span>
        </button>
        <a class="btn btn-default" onclick="window.history.back()">
            <i class="fa fa-mail-reply"></i><span class="m-l5">Back</span>
        </a>

    </div>
</div>