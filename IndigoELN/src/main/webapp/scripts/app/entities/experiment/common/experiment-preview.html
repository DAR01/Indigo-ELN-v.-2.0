<div class="panel panel-info">
    <div id="css-for-print" style="display: none">
        .for-print-only img { width: 100% } .for-print-only { font-size: 13px; color: #000; font-family: arial; } .print-component { page-break-before: auto; page-break-inside: avoid; margin: 20px 0; } .print-component.first { margin-top: 0 } .for-print-only table { width: 100%; border-spacing: 0; table-layout: fixed; border-collapse: collapse; } table { page-break-after: auto } tr { page-break-inside: avoid; } .pba { page-break-inside: avoid; } thead { display: table-header-group } tfoot { display: table-footer-group } .for-print-only table td, .for-print-only table th { border: 1px solid #ccc; font-size: 13px; padding: 4px; word-wrap: break-word; page-break-inside: avoid; } .for-print-only table.print-table-inner td{border:0; } .print-table-inner-td {vertical-align: top;} .simditor {border : 1px solid #ccc; padding:10px}
.     </div>
    <div class="panel-heading">Preview Experiment {{notebook.name + '-' + experiment.name}}</div>
    <div class="panel-body panel-experiment-preview">
        <form name="print-form" id="print-form" role="form" novalidate>
            <!--HEADER-->
            <div class="row print-component">
                <div class="col-xs-12">
                    <table class="print-header">
                        <tr>
                            <th colspan="2">
                                <h2>CONFIDENTIAL</h2></th>
                            <th colspan="2">
                                <div class="logo"></div>
                            </th>
                        </tr>
                        <tr>
                            <td style="width:20%">Author:</td>
                            <td style="width:30%">{{experiment.author.firstName + ' ' + experiment.author.lastName}}
                            </td>
                            <td style="width:20%">Notebook&nbsp;Experiment:</td>
                            <td style="width:30%">{{notebook.name + '-' + experiment.name}}</td>
                        </tr>
                        <tr>
                            <td>Co-authors:</td>
                            <td>{{ joinArr(reactionDetails.coAuthors) }}</td>
                            <td>Status:</td>
                            <td>{{experiment.status | uppercase }}</td>
                        </tr>
                        <tr>
                            <td>Project</td>
                            <td>{{project.name}}
                                <td>Printed Page:</td>
                                <td>x{{}} of y{{}}</td>
                                <!--think about-->
                        </tr>
                        <tr>
                            <!--Experiment Subject / Title in Reaction Details and in Concept Subject / Title-->
                            <!--what if no such component?-->
                            <td>Subject/Title</td>
                            <td>{{reactionDetails.title || conceptDetails.title}}</td>
                            <td>Printed Date:</td>
                            <td>{{currentDate | date:'MMM DD, YYYY HH:mm:ss z'}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <!--reactionDetails DETAILS-->
            <div class="row print-component" ng-if="reactionDetails">
                <div class="col-xs-1 need-to-print" ng-init="reactionDetails.needToPrint = true">
                    <indigo-checkbox indigo-label="Print" indigo-model="reactionDetails.needToPrint" indigo-name="needToPrint" indigo-disabled="fullPrint"></indigo-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">REACTION DETAILS</strong>
                    <table style="border: 1px black solid" class="print-table-simple">
                        <tr>
                            <th style="width:20%">Creation Date:</th>
                            <td style="width:30%">{{experiment.creationDate | date:'MMM DD, YYYY HH:mm:ss z'}}
                            </td>
                            <th style="width:20%">Therapeutic&nbsp;Area:</th>
                            <td style="width:30%">{{reactionDetails.therapeuticArea.name}}</td>
                        </tr>
                        <tr>
                            <th>Continued From:</th>
                            <td>{{ joinArr(reactionDetails.contFromRxn, 'text') }}</td>
                            <th>Project Code:</th>
                            <td>{{ reactionDetails.codeAndName.name}}</td>
                        </tr>
                        <tr>
                            <th>Continued To:</th>
                            <td>{{ joinArr(reactionDetails.contToRxn, 'text') }}</td>
                            <th>Project Alias</th>
                            <td>{{reactionDetails.projectAliasName}}</td>
                        </tr>
                        <tr>
                            <th>Linked&nbsp;Experiment:</th>
                            <td>{{joinArr(reactionDetails.linkedExperiments, 'text')}}</td>
                            <th>Literature&nbsp;Reference:</th>
                            <td>{{reactionDetails.literature}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <!--SUMMARY REACTION-->
            <div class="row print-component" ng-if="reaction">
                <div class="col-xs-1 need-to-print" ng-init="reaction.needToPrint = true">
                    <indigo-checkbox indigo-label="Print" indigo-model="reaction.needToPrint" indigo-name="needToPrint" indigo-disabled="fullPrint"></indigo-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">REACTION SCHEME</strong>
                    <table class="print-table">
                        <tr>
                            <td><img style="max-height:200px; margin: 0 auto" class="img-responsive center-block" ng-src="data:image/svg+xml;base64,{{reaction.image}}" alt="Image is unavailable.">
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <!--STOICHIOMETRY-->
            <div class="row print-component" ng-if="stoichTable">
                <div class="col-xs-1 need-to-print" ng-init="stoichTable.needToPrint = true">
                    <indigo-checkbox indigo-label="Print" indigo-model="stoichTable.needToPrint" indigo-name="needToPrint" indigo-disabled="fullPrint"></indigo-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">STOICHIOMETRY</strong>
                    <table class="print-table">
                        <tr>
                            <th style="width:30%">Reagent</th>
                            <th style="width:8%">Mol Wgh</th>
                            <th style="width:8%">Weight</th>
                            <th style="width:8%">Moles</th>
                            <th style="width:8%">Volume</th>
                            <th style="width:8%">EQ</th>
                            <th style="width:30%">Other Information</th>
                        </tr>
                        <tr ng-repeat="reactant in stoichTable.reactants track by $index">
                            <td style="width:30%">
                                <div><img ng-if="reactant.structure.image" class="img-responsive" style="max-height:200px; margin: 0 auto" ng-src="data:image/svg+xml;base64,{{reactant.structure.image}}" alt="Image is unavailable."></div>
                                <p>{{reactant.fullNbkBatch}} </p>
                                <p> {{reactant.compoundId}} </p>
                            </td>
                            <td style="width:8%">{{toDigits(reactant.molWeight) }}</td>
                            <td style="width:8%">{{toDigits(reactant.weight) }}</td>
                            <td style="width:8%">{{toDigits(reactant.mol)}}</td>
                            <td style="width:8%">{{toDigits(reactant.volume)}}</td>
                            <td style="width:8%">{{toDigits(reactant.eq)}}</td>
                            <td style="width:30%" class="print-table-inner-td">
                                <table class="print-table-inner">
                                    <tr>
                                        <td style="width:40%">Name:</td>
                                        <td>{{reactant.chemicalName}}</td>
                                    </tr>
                                    <tr>
                                        <td>Rxn Role:</td>
                                        <td>{{reactant.rxnRole.name}}</td>
                                    </tr>
                                    <tr>
                                        <td>Purity:</td>
                                        <td>{{toDigits(reactant.stoicPurity)}}</td>
                                    </tr>
                                    <tr>
                                        <td>Molarity:</td>
                                        <td> {{toDigits(reactant.molarity)}}</td>
                                    </tr>
                                    <tr>
                                        <td>Hazard:</td>
                                        <td>{{reactant.hazardComments}}</td>
                                    </tr>
                                    <tr>
                                        <td>Comments:</td>
                                        <td>{{reactant.comments}}</td>
                                    </tr>
                                    <tr>
                                        <td>Salt Code:</td>
                                        <td>{{reactant.saltCode.name}}</td>
                                    </tr>
                                    <tr>
                                        <td>Salt EQ:</td>
                                        <td>{{toDigits(reactant.saltEq)}}</td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <!--EXPERIMENT DESCRIPTION-->
            <div class="row print-component" ng-if="experimentDescription">
                <div class="col-xs-1 need-to-print" ng-init="experimentDescription.needToPrint = true">
                    <indigo-checkbox indigo-label="Print" indigo-model="experimentDescription.needToPrint" indigo-name="needToPrint" indigo-disabled="fullPrint"></indigo-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">EXPERIMENT DESCRIPTION</strong>
                    <indigo-text-editor indigo-model="experimentDescription.description" indigo-name="experimentDescription" indigo-readonly="true"></indigo-text-editor>
                </div>
            </div>
            <!--BATCH INFORMATION-->
            <div class="row print-component" ng-if="batchSummary">
                <div class="col-xs-1 need-to-print" ng-init="batchSummary.needToPrint = true">
                    <indigo-checkbox indigo-label="Print" indigo-model="batchSummary.needToPrint" indigo-name="needToPrint" indigo-disabled="fullPrint"></indigo-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">BATCH INFORMATION</strong>
                    <table class="print-table">
                        <tr>
                            <th style="width:10%">Nbk Batch</th>
                            <th style="width:20%">Structure</th>
                            <th style="width:10%">Amount Made</th>
                            <th style="width:10%">Theoretical Yield</th>
                            <th style="width:10%">Purity (%) Determined By</th>
                            <th>Batch Information</th>
                        </tr>
                        <tr ng-repeat="batch in batchSummary.batches track by $index">
                            <td style="width:10%">{{batch.nbkBatch}}</td>
                            <td style="width:20%">
                                <img ng-if="batch.structure.image" class="img-responsive" style="max-height:200px; margin: 0 auto" ng-src="data:image/svg+xml;base64,{{batch.structure.image}}" alt="Image is unavailable.">
                                    <p style="text-align: center; margin-top: 20px;">
                                    {{batch.stereoisomer.name }} {{batch.stereoisomer.description }}</p>
                                
                            </td>
                            <td style="width:10%">{{toDigits(batch.totalWeight)}} </td>
                            <td style="width:10%">{{ toDigits(batch.theoWeight) }} {{toDigits(batch.yield) }}% </td>
                            <td style="width:10%">{{batch.purity.asString}}</td>
                            <td class="print-table-inner-td">
                                <table class="print-table-inner">
                                    <tr>
                                        <td style="width:40%">Mol Wgt:</td>
                                        <td>{{toDigits(batch.molWeight)}}</td>
                                    </tr>
                                    <tr>
                                        <td>Exact Mass:</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>Salt Code:</td>
                                        <td>{{batch.saltCode ? batch.saltCode.name : '00 - Parent Structure'}}</td>
                                    </tr>
                                    <tr>
                                        <td>Salt EQ:</td>
                                        <td>{{ toDigits(batch.saltEq) }}</td>
                                    </tr>
                                    <tr>
                                        <!--add field?-->
                                        <td>Batch Owner:</td>
                                        <td>{{ joinArr(reactionDetails.batchOwner)}}</td>
                                    </tr>
                                    <tr>
                                        <td>Comments:</td>
                                        <td>{{batch.comments}}</td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <!--REGISTRATION SUMMARY-->
            <!--no such component-->
            <div class="row print-component" ng-if="registrationSummary">
                <div class="col-xs-1 need-to-print" ng-init="registrationSummary.needToPrint = true">
                    <indigo-checkbox indigo-label="Print" indigo-model="registrationSummary.needToPrint" indigo-name="needToPrint" indigo-disabled="fullPrint"></indigo-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">REGISTRATION SUMMARY</strong>
                    <table class="print-table">
                        <tr>
                            <th style="width:30%">Nbk Batch</th>
                            <th style="width:20%">Total Amount Made</th>
                            <th style="width:30%">Registration Status</th>
                            <th style="width:20%">Conversational Batch</th>
                        </tr>
                        <tr ng-repeat="batch in registrationSummary.batches track by $index">
                            <td style="width:30%">{{batch.fullNbkBatch}}</td>
                            <td style="width:20%">{{toDigits(batch.totalWeight)}}</td>
                            <td style="width:30%">{{batch.registrationStatus}}</td>
                            <td style="width:20%">{{batch.conversationalBatchNumber}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <!--BATCH DETAILS-->
            <div class="row print-component" ng-if="batchDetails">
                <div class="col-xs-1 need-to-print" ng-init="batchDetails.needToPrint = true">
                    <indigo-checkbox indigo-label="Print" indigo-model="batchDetails.needToPrint" indigo-name="needToPrint" indigo-disabled="fullPrint"></indigo-checkbox>
                </div>
                <div class="col-xs-11" ng-if="batchDetails">
                    <strong class="pull-right">BATCH DETAILS</strong>
                    <div class="pba" style="margin-top:20px" ng-repeat="batch in batchSummary.batches track by $index">
                        <table class="print-table">
                            <tr>
                                <th style="width:30%">For Notebook Batch:</th>
                                <th style="width:70%">
                                    <span class="pull-left">&nbsp; {{batch.fullNbkBatch}}</span>
                                    <span class="pull-right">#barcode &nbsp;</span>
                                </th>
                            </tr>
                            <tr>
                                <!--no such field!-->
                                <td style="width:30%">Registered Date</td>
                                <td style="width:70%">{{batch.registrationDate | date:'MMM dd yyyy'}}</td>
                            </tr>
                            <tr>
                                <td style="width:30%">Structure Comments</td>
                                <td style="width:70%">{{batch.structureComments}}</td>
                            </tr>
                            <tr>
                                <td style="width:30%">Compound Source</td>
                                <td style="width:70%">{{batch.source.name}}</td>
                            </tr>
                            <tr>
                                <td style="width:30%">Source Detail</td>
                                <td style="width:70%">{{batch.sourceDetail.name}}</td>
                            </tr>
                            <tr>
                                <!--no such field!-->
                                <td style="width:30%">Batch Owner</td>
                                <td style="width:70%"> {{ joinArr(reactionDetails.batchOwner) }}</td>
                            </tr>
                            <tr>
                                <!--no model-->
                                <td style="width:30%">Calculated Batch MW</td>
                                <td style="width:70%">{{toDigits(batch.molWeight) }}</td>
                            </tr>
                            <tr>
                                <!--no model-->
                                <td style="width:30%">Calculated Batch MF</td>
                                <td style="width:70%">{{batch.formula}}</td>
                            </tr>
                            <tr>
                                <td style="width:30%">Residual Solvents</td>
                                <td style="width:70%">{{batch.residualSolvents.asString}}</td>
                            </tr>
                            <tr>
                                <td style="width:30%">Solubility in Solvents</td>
                                <td style="width:70%">{{batch.solubility.asString}}</td>
                            </tr>
                            <tr>
                                <td style="width:30%">Precursor/Reactant IDs</td>
                                <td style="width:70%">{{batch.precursors}}</td>
                            </tr>
                            <tr>
                                <td style="width:30%">External Supplier</td>
                                <td style="width:70%">{{batch.externalSupplier.asString}}</td>
                            </tr>
                            <tr>
                                <td style="width:30%">Hazards</td>
                                <td style="width:70%">{{batch.healthHazards.asString}}</td>
                            </tr>
                            <tr>
                                <td style="width:30%">Handling</td>
                                <td style="width:70%">{{batch.handlingPrecautions.asString}}</td>
                            </tr>
                            <tr>
                                <td style="width:30%">Storage</td>
                                <td style="width:70%">{{batch.storageInstructions.asString}}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <!--CONCEPT DETAIL-->
            <div class="row print-component" ng-if="conceptDetails">
                <div class="col-xs-1 need-to-print" ng-init="conceptDetails.needToPrint = true">
                    <indigo-checkbox indigo-label="Print" indigo-model="conceptDetails.needToPrint" indigo-name="needToPrint" indigo-disabled="fullPrint"></indigo-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">CONCEPT DETAILS</strong>
                    <table style="border: 1px black solid" class="print-table-simple">
                        <tr>
                            <th style="width:20%">Creation Date:</th>
                            <td style="width:30%">{{experiment.creationDate | date:'MMM DD, YYYY HH:mm:ss z'}}</td>
                            <th style="width:20%">Therapeutic&nbsp;Area:</th>
                            <td style="width:30%">{{conceptDetails.therapeuticArea.name}}</td>
                        </tr>
                        <tr>
                            <th style="width:20%">Linked Experiment:</th>
                            <td style="width:30%">{{joinArr(conceptDetails.linkedExperiments, 'text')}}</td>
                            <th style="width:20%">Project Code:</th>
                            <td style="width:30%">{{conceptDetails.codeAndName.name}}</td>
                        </tr>
                        <tr>
                            <th style="width:20%">Concept Keywords:</th>
                            <td style="width:30%">{{conceptDetails.keywords}}</td>
                            <th style="width:20%">Designers</th>
                            <td style="width:30%">{{joinArr(conceptDetails.designers)}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <!--PREFERRED COMPOUNDS-->
            <!--no such component yet ? concept(no fields), product-batch-summary?-->
            <div class="row print-component" ng-if="preferredCompounds">
                <div class="col-xs-1 need-to-print" ng-init="preferredCompounds.needToPrint = true">
                    <indigo-checkbox indigo-label="Print" indigo-model="preferredCompounds.needToPrint" indigo-name="needToPrint" indigo-disabled="fullPrint"></indigo-checkbox>
                </div>
                <div class="col-xs-11">
                    <strong class="pull-right">PREFERRED COMPOUNDS</strong>
                    <table class="print-table">
                        <tr>
                            <th style="width:20%">Structure</th>
                            <th style="width:20%">Notebook Batch #</th>
                            <th style="width:20%">Mol Weight</th>
                            <th style="width:20%">Mol Formula</th>
                            <th style="width:20%">Structure Comments</th>
                        </tr>
                        <tr ng-repeat="compound in preferredCompounds.compounds  track by $index">
                            <td style="width:20%">
                                <div><img ng-if="compound.structure.image" class="img-responsive" style="max-height:200px; margin: 0 auto" ng-src="data:image/svg+xml;base64,{{compound.structure.image}}" alt="Image is unavailable."></div>

                                <p style="text-align: center;margin-top: 20px">{{compound.virtualCompoundId}}</p>
                                <p style="text-align: center;">{{compound.stereoisomer.name }} {{compound.stereoisomer.description }}</p>
                            </td>
                            <td style="width:20%">{{compound.fullNbkBatch}}</td>
                            <td style="width:20%">{{toDigits(compound.molWeight) }}</td>
                            <td style="width:20%">{{compound.formula}}</td>
                            <td style="width:20%">{{compound.structureComments}}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </form>
    </div>
    <div class="btn-bottom-block tab-content-pad experiment-preview-block" style="">
        <button ng-click="print(experiment)" ng-if="!fullPrint" ng-disabled="print-form.$invalid || isPrinting" class="btn btn-primary">
            <span class="fa fa-print"></span><span class="m-l5">Print</span>
        </button>
        <button ng-click="submit()" ng-if="fullPrint" ng-disabled="print-form.$invalid || isPrinting" class="btn btn-info">
            <i class="fa fa-save"></i><span class="m-l5">Submit</span>
        </button>
        <a class="btn btn-default" onclick="window.history.back()">
            <i class="fa fa-mail-reply"></i><span class="m-l5">Back</span>
        </a>
    </div>
</div>
