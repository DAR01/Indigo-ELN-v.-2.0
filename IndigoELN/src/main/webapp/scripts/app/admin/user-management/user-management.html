<div class="panel panel-info user-management">
    <div class="panel-heading">Users</div>
    <div class="panel-body">
        <!-- fake fields are a workaround for chrome autofill getting the wrong fields -->
        <button class="btn btn-primary" ng-click="create()">
            <span class="glyphicon glyphicon-flash"></span> <span>Create a new User</span>
        </button>

        <div ng-show="user" class="panel panel-primary edit-form">
            <div class="panel-heading">
                Create/Update User
            </div>
            <div class="panel-body ">
                <form id="editForm" name="editForm" role="form" novalidate ng-submit="save()" show-validation
                      class="form-horizontal" autocomplete="off">

                    <div class="row">
                        <div class="col-xs-6">
                            <!-- fake fields are a workaround for chrome autofill getting the wrong fields -->
                            <input style="display:none" type="text" name="fakeusernameremembered"/>
                            <input style="display:none" type="password" name="fakepasswordremembered"/>
                            <my-input
                                    my-label="ID"
                                    my-name="id"
                                    my-type="text"
                                    my-model="user.id"
                                    my-readonly="true"></my-input>
                            <my-input
                                    my-label="First name"
                                    my-name="firstName"
                                    my-type="text"
                                    my-model="user.firstName"
                                    my-validation-obj="editForm.firstName"
                                    my-validation-maxlength="50"
                                    ></my-input>

                            <my-input
                                    my-label="Login"
                                    my-name="login"
                                    my-type="text"
                                    my-model="user.login"
                                    my-validation-obj="editForm.login"
                                    my-validation-required="user.id == null"
                                    my-validation-maxlength="50"
                                    ></my-input>
                            <my-input
                                    my-label="Email"
                                    my-name="email"
                                    my-type="text"
                                    my-model="user.email"
                                    my-validation-obj="editForm.email"
                                    my-validation-required="user.email == null"
                                    my-validation-maxlength="100"
                                    ></my-input>
                        </div>
                        <div class="col-xs-6">
                            <my-input
                                    my-label="Last name"
                                    my-name="lastName"
                                    my-type="text"
                                    my-model="user.lastName"
                                    my-validation-obj="editForm.lastName"
                                    my-validation-maxlength="50"
                                    ></my-input>
                            <my-input
                                    my-label="Password"
                                    my-name="password"
                                    my-type="password"
                                    my-model="user.password"
                                    my-validation-obj="editForm.password"
                                    my-validation-required="user.id == null"
                                    my-validation-maxlength="50"
                                    ></my-input>
                            <my-select
                                    my-label="Profiles"
                                    my-name="role"
                                    my-model="user.roles"
                                    my-items="roles"
                                    my-multiple="true"
                                    ></my-select>
                            <my-checkbox
                                    my-label="Activated"
                                    my-model="user.activated"
                                    my-name="activated"
                                    my-multiple="true"
                                    ></my-checkbox>
                        </div>
                    </div>

                </form>
            </div>
            <div class="panel-footer text-right">
                <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="clear()">
                    <span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span
                        >Cancel</span>
                </button>
                <button type="submit" form="editForm" ng-disabled="editForm.$invalid || isSaving"
                        class="btn btn-primary">
                    <span class="glyphicon glyphicon-save"></span>&nbsp;<span>Save</span>
                </button>
            </div>
        </div>

        <form class="form-inline text-right">
            <div class="form-group">
                <label for="searchUser">Search User</label>
                <input type="text" class="form-control" id="searchUser" placeholder="Username, first name or last name"
                       ng-model="searchText">
            </div>
            <button type="submit" class="btn btn-default" ng-click="search()">
                <span class="glyphicon glyphicon-search"></span>
                Search
            </button>
        </form>

    </div>
    <table class="table table-striped">
        <thead>
        <tr>
            <th>Username</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Active</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="user in users track by user.id">
            <!--<td><a ui-sref="user-management-detail({login:user.login})">{{user.id}}</a></td>-->
            <td>{{user.login}}</td>
            <td>{{user.firstName}}</td>
            <td>{{user.lastName}}</td>
            <td>{{user.email}}</td>
            <td>
                    <span class="label label-danger" ng-click="setActive(user, true)" ng-show="!user.activated"
                          style="cursor: pointer;">Desactivated</span>
                    <span class="label label-success" ng-click="setActive(user, false)" ng-show="user.activated"
                          style="cursor: pointer;">Activated</span>
            </td>
            <td class="text-right">
                <button type="submit"
                        ng-click="edit(user)"
                        class="btn btn-primary btn-sm">
                    <span class="glyphicon glyphicon-pencil"></span>
                </button>
                <button type="submit"
                        ui-sref="user-management.delete({login:user.login})"
                        class="btn btn-danger btn-sm">
                    <span class="glyphicon glyphicon-remove-circle"></span>
                </button>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="panel-footer text-center">
        <uib-pagination class="pagination-sm" total-items="totalItems" ng-model="page"
                        ng-change="loadAll()"></uib-pagination>
    </div>
</div>

