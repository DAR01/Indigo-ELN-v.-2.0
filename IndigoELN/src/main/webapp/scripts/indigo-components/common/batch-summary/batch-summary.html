<indigo-table indigo-id="product-batch-summary"
              indigo-columns="vm.columns"
              indigo-rows="vm.batches"
              indigo-draggable-columns="true"
              indigo-search-columns="['nbkBatch']"
              is-readonly="vm.isReadonly"
              on-select-row="vm.onRowSelected(row)"
              indigo-hide-column-settings="vm.isHideColumnSettings"
              selected-batch="vm.selectedBatch"
              selected-batch-trigger="vm.selectedBatchTrigger"
              on-changed="vm.onChange()"
              on-changed-visible-column="vm.onChangedVisibleColumn(column, isVisible)"
              on-close-cell="vm.onClose(column, data)"
              ng-class="{'product-batch-register': vm.isReadonly || !vm.isHasCheckedRows()}">
    <div class="row m-b20">
        <div class="col-lg-8 m-bt-lg">
            <span class="txt-small bold m-r5" i-translate="BATCHES" i-end=":"></span>
            <div class="btn-group">
                <add-new-batch batch-operation="vm.batchOperation"
                               on-added-batch="vm.onAddedBatch({batch: batch})"
                               on-select-batch="vm.onSelectBatch({batch: batch})"
                               is-readonly="vm.isReadonly">
                </add-new-batch>
                <button type="button" class="btn btn-info btn-small"
                        ng-disabled="vm.isReadonly || !vm.isHasCheckedRows()"
                        ng-click="vm.duplicateBatches()">
                    <span class="fa fa-clone"></span>
                    <span class="m-l5">Duplicate</span>
                </button>
                <delete-batches is-readonly="vm.isReadonly || !vm.isHasCheckedRows()"
                                batches="vm.batches"
                                on-remove-batches="vm.onRemoveBatches({batches: batches})">
                </delete-batches>
                <button type="button" class="btn btn-info btn-small"
                        ng-disabled="vm.isReadonly || vm.isIntendedSynced()"
                        ng-click="vm.syncWithIntendedProducts()">
                    <span class="fa fa-refresh"></span>
                    <span class="m-l5" i-translate="SYNC"></span>
                </button>
                <button type="button" class="btn btn-info btn-small" disabled i-translate="VNV"></button>
                <button type="button" class="btn btn-info btn-small"
                        ng-disabled="vm.isReadonly || !vm.isHasCheckedRows()" ng-show="vm.isHasRegService"
                        ng-click="vm.registerBatches()">
                    <span class="fa fa-floppy-o"></span>
                    <span class="m-l5" i-translate="REGISTER"></span>
                </button>
                <indigo-inline-loader promise="vm.batchOperation"
                                      on-status-changed="vm.onBatchOperationChanged(completed)">
                </indigo-inline-loader>
            </div>
        </div>
        <div class="col-lg-4 text-align-lg">
            <span class="txt-small bold m-r5" i-translate="SD_FILE" i-end=":"></span>
            <div class="btn-group">
                <button type="button"
                        class="btn btn-info btn-small btn-can-loading}}"
                        ng-class="{'btn-loading': importLoading}"
                        ng-click="vm.importSDFile()" ng-disabled="vm.isReadonly || vm.isBatchLoading">
                    <span class="fa fa-cloud-download"></span>
                    <span class="m-l5" i-translate="IMPORT"></span>
                </button>
                <button type="button" class="btn btn-info btn-small" ng-click="vm.exportSDFile()"
                        ng-disabled="!vm.isHasCheckedRows()">
                    <span class="fa fa-cloud-upload"></span>
                    <span class="m-l5" i-translate="EXPORT"></span>
                </button>
            </div>
        </div>
    </div>
</indigo-table>
