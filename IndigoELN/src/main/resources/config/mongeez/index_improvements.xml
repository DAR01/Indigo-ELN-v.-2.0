<mongoChangeLog>
    <changeSet changeId="ChangeSet-6" author="zubkov_timofey">
        <script>
            <!--user collection-->
            db.user.dropIndex({"login" : 1});
            db.user.ensureIndex({"login" : 1}, {"unique" : true});

            <!--role collection-->
            db.role.ensureIndex({"name" : 1}, {"unique" : true});

            <!--project collection-->
            db.project.drop();
            db.project.ensureIndex({"accessList.user.$id":1})
            db.project.ensureIndex({"notebooks.$id":1})
            db.project.ensureIndex({"fileIds":1})

            <!--notebook collection-->
            db.notebook.drop();
            db.notebook.ensureIndex({"experiments.$id":1})
            db.notebook.ensureIndex({"name" : 1}, {"unique" : true});

            <!--experiment collection-->
            db.experiment.drop();
            db.experiment.ensureIndex({"fileIds":1})

            <!--other collections-->
            db.fs.chunks.drop();
            db.fs.files.drop();
        </script>
    </changeSet>
</mongoChangeLog>