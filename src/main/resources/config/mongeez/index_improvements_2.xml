<mongoChangeLog>
    <changeSet changeId="ChangeSet-10" author="zubkov_timofey">
        <script>
            <!--project collection-->
            db.project.dropIndex({"accessList.user.$id":1})
            db.project.dropIndex({"notebooks.$id":1})

            db.project.ensureIndex({"accessList.user":1})
            db.project.ensureIndex({"notebooks":1})
            db.project.ensureIndex({"fileIds":1})
            db.project.ensureIndex({"sequenceId":1})

            <!--notebook collection-->
            db.notebook.dropIndex({"experiments.$id":1})

            db.notebook.ensureIndex({"experiments":1})
            db.notebook.ensureIndex({"name" : 1}, {"unique" : true});
            db.notebook.ensureIndex({"sequenceId":1})

            <!--experiment collection-->
            db.experiment.ensureIndex({"fileIds":1})
            db.experiment.ensureIndex({"sequenceId":1})

            <!--user collection-->
            db.user.ensureIndex({"roles":1})
        </script>
    </changeSet>
</mongoChangeLog>