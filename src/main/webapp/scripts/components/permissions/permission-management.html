<div name="permissionsForm" ng-submit="managePermissions()">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
                ng-click="clear()">&times;</button>
        <h2 class="modal-title">Manage Permissions</h2>
    </div>
    <div class="modal-body">
        <div class="form-horizontal">
            <my-select my-label="Select a User to manage permissions"
                       my-label-vertical="true"
                       my-model="selectedMembers"
                       my-items="users"
                       my-item-prop="login"
            ></my-select>
        </div>
    </div>
    <div style="margin-left: 20px;">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th width="30%">Member</th>
                <th>Permission</th>
                <th width="20%">Action</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="member in accessList">
                <td>{{ member.user.lastName + ' ' + member.user.firstName + ' (' + member.user.login + ')' }}
                </td>
                <td>
                    <div>
                        <a ng-class="{disabled: isAuthor(member)}" e-form="perm"
                           ng-click="show(perm, member)"
                           onbeforesave="saveOldPermission(member.permissionView)"
                           onaftersave="checkAuthority(member, member.permissionView)"
                           editable-select="member.permissionView"
                           e-ng-options="p.id as p.name for p in permissions">
                            {{ member.permissionView }}
                        </a>
                    </div>
                </td>
                <td nowrap>
                    <button ng-disabled="isAuthor(member)" type="button" class="btn btn-warning btn-xs"
                            ng-click="removeMember(member)">
                        <span class="glyphicon glyphicon-ban-circle"></span> Remove
                    </button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="modal-footer">
        <button type="submit" ng-disabled="permissionsForm.$invalid" class="btn btn-info" ng-click="ok()">
            <span class="glyphicon glyphicon-book"></span>&nbsp;<span>Save</span>
        </button>
        <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="clear()">
            <span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span>Cancel</span>
        </button>
    </div>
</div>