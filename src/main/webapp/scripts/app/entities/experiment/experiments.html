<div class="main-page-content scroll-dashboard-full" >
    <div class="row">
        <div class="col-sm-8">
            <div class="panel panel-info panel-main-h" cg-busy="{promise:loading, minDuration:700}">
                <div class="panel-heading">experiments statistics</div>
                <div class="panel-body panel-body-nopad" >
                    <div class="statistic-radio">
                        <input type="radio" name="experimentsSwitcher" ng-model="dView" ng-value="'open'">
                        <div>
                            <span class="statistic-txt">Open</span>
                            <span class="count pull-right" ng-bind="experiments.openAndCompletedExp.length"></span>
                            <uib-progressbar animate="false" value="((experiments.openAndCompletedExp.length * 100)/100) || 0" type="success"></uib-progressbar>
                        </div>
                    </div>
                    <div class="statistic-radio statistic-orange">
                        <input type="radio" name="experimentsSwitcher" ng-model="dView" ng-value="'wait'">
                        <div>
                            <span class="statistic-txt">Waiting author’s signature</span>
                            <span class="count pull-right" ng-bind="experiments.waitingSignatureExp.length"></span>
                            <uib-progressbar animate="false" value="((experiments.waitingSignatureExp.length * 100)/100) || 0" type="success"></uib-progressbar>
                        </div>
                    </div>
                    <div class="statistic-radio statistic-yellow">
                        <input type="radio" name="experimentsSwitcher" ng-model="dView" ng-value="'submitted'">
                        <div>
                            <span class="statistic-txt">Submitted by author</span>
                            <span class="count pull-right" ng-bind="experiments.submittedAndSigningExp.length"></span>
                            <uib-progressbar animate="false" value="((experiments.submittedAndSigningExp.length * 100)/100) || 0" type="success"></uib-progressbar>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="panel panel-info panel-main-h">
                <div class="panel-heading">experiments</div>
                <div class="panel-body panel-body-nopad">
                    <div class="experiment-count-block">
                        <span ng-bind="(experiments.submittedAndSigningExp.length + experiments.openAndCompletedExp.length)"></span>
                        <span>Experiments</span>
                        <span>(created during the last month)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="panel panel-info panel-info-table" ng-if="dView === 'open'">
        <div class="panel-heading">Open experiments <span class="count" ng-bind="experiments.openAndCompletedExp.length"></span></div>
        <div class="panel-body panel-body-nopad">
            <div class="table-responsive" my-scroller="x">
                <table class="main-table table table-striped table-condensed">
                    <thead class="main-table__header">
                    <tr class="table-list">
                        <th class="table-list__item table-list__item_header">Experiment ID</th>
                        <th class="table-list__item table-list__item_header">Title</th>
                        <th class="table-list__item table-list__item_header">Status</th>
                        <th class="table-list__item table-list__item_header">Co-authors</th>
                        <th class="table-list__item table-list__item_header">Project</th>
                        <th class="table-list__item table-list__item_header">Creation Date</th>
                        <th class="table-list__item table-list__item_header">Last Edit Date</th>
                        <th class="table-list__item table-list__item_header">Idle Workdays</th>
                    </tr>
                    </thead>
                    <tbody class="main-table__body">
                    <tr class="table-list" ng-repeat="exp in experiments.openAndCompletedExp track by $index">
                        <td class="table-list__item">
                            <a ui-sref="entities.experiment-detail({projectId: exp.projectId, notebookId: exp.notebookId, experimentId: exp.experimentId})">{{exp.id}}</a>
                        </td>
                        <td class="table-list__item">{{exp.name}}</td>
                        <td class="table-list__item">{{exp.status}}</td>
                        <td class="table-list__item">
                            <ul>
                                <li ng-repeat="user in exp.coAuthors track by $index">{{user.firstName + ' ' + user.lastName}}</li>
                            </ul>
                        </td>
                        <td class="table-list__item">{{exp.project}}</td>
                        <td class="table-list__item">{{exp.creationDate | date:'MMM dd yyyy'}}</td>
                        <td class="table-list__item">{{exp.lastEditDate | date:'MMM dd yyyy'}}</td>
                        <td class="table-list__item">{{getIdleWorkdays(exp.lastEditDate) + ' day(s)'}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="panel panel-info panel-info-table" ng-if="dView === 'wait'">
        <div class="panel-heading">Experiments Waiting Author’s Signature <span class="count count-orange" ng-bind="experiments.waitingSignatureExp.length"></span></div>
        <div class="panel-body panel-body-nopad">
            <div class="table-responsive" my-scroller="x">
                <table class="main-table table table-striped table-condensed">
                    <thead class="main-table__header">
                    <tr class="table-list">
                        <th class="table-list__item table-list__item_header">Experiment ID</th>
                        <th class="table-list__item table-list__item_header">Title</th>
                        <th class="table-list__item table-list__item_header">Status</th>
                        <th class="table-list__item table-list__item_header">Author</th>
                        <th class="table-list__item table-list__item_header">Submitter</th>
                        <th class="table-list__item table-list__item_header">Witness</th>
                        <th class="table-list__item table-list__item_header">Creation Date</th>
                        <th class="table-list__item table-list__item_header">Last Action Date</th>
                        <th class="table-list__item table-list__item_header">Idle Workdays</th>
                    </tr>
                    </thead>
                    <tbody class="main-table__body">
                    <tr class="table-list" ng-repeat="exp in experiments.waitingSignatureExp track by $index">
                        <td class="table-list__item">
                            <a href="{{signatureServiceUrl}}">{{exp.id}}</a>
                        </td>
                        <td class="table-list__item">{{exp.name}}</td>
                        <td class="table-list__item">{{exp.status}}</td>
                        <td class="table-list__item">{{exp.author.firstName + ' ' + exp.author.lastName}}</td>
                        <td class="table-list__item">{{exp.submitter.firstName + ' ' + exp.submitter.lastName}}</td>
                        <td class="table-list__item">
                            <ul>
                                <li ng-repeat="user in exp.witnesses track by $index">{{user.firstName + ' ' +
                                    user.lastName}}
                                </li>
                            </ul>
                        </td>
                        <td class="table-list__item">{{exp.creationDate | date:'MMM dd yyyy'}}</td>
                        <td class="table-list__item">{{exp.lastEditDate | date:'MMM dd yyyy'}}</td>
                        <td class="table-list__item">{{getIdleWorkdays(exp.lastEditDate) + ' day(s)'}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>

    <div class="panel panel-info panel-info-table" ng-if="dView === 'submitted'">
        <div class="panel-heading">Experiments Submitted by Author <span class="count count-yellow" ng-bind="experiments.submittedAndSigningExp.length"></span></div>
        <div class="panel-body panel-body-nopad">
            <div class="table-responsive" my-scroller="x">
                <table class="main-table table table-striped table-condensed">
                    <thead class="main-table__header">
                    <tr class="table-list">
                        <th class="table-list__item table-list__item_header">Experiment ID</th>
                        <th class="table-list__item table-list__item_header">Title</th>
                        <th class="table-list__item table-list__item_header">Status</th>
                        <th class="table-list__item table-list__item_header">Author</th>
                        <th class="table-list__item table-list__item_header">Submitter</th>
                        <th class="table-list__item table-list__item_header">Witness</th>
                        <th class="table-list__item table-list__item_header">Creation Date</th>
                        <th class="table-list__item table-list__item_header">Last Edit Date</th>
                        <th class="table-list__item table-list__item_header">Comments</th>
                    </tr>
                    </thead>
                    <tbody class="main-table__body">
                    <tr class="table-list" ng-repeat="exp in experiments.submittedAndSigningExp track by $index">
                        <td class="table-list__item">
                            <a href="{{signatureServiceUrl}}">{{exp.id}}</a>
                        </td>
                        <td class="table-list__item">{{exp.name}}</td>
                        <td class="table-list__item">{{exp.status}}</td>
                        <td class="table-list__item">{{exp.author.firstName + ' ' + exp.author.lastName}}</td>
                        <td class="table-list__item">{{exp.submitter.firstName + ' ' + exp.submitter.lastName}}</td>
                        <td class="table-list__item">
                            <ul>
                                <li ng-repeat="user in exp.witnesses track by $index">{{user.firstName + ' ' +
                                    user.lastName}}
                                </li>
                            </ul>
                        </td>
                        <td class="table-list__item">{{exp.creationDate | date:'MMM dd yyyy'}}</td>
                        <td class="table-list__item">{{exp.lastEditDate | date:'MMM dd yyyy'}}</td>
                        <td class="table-list__item">
                            <ul>
                                <li ng-repeat="comment in exp.comments track by $index">{{comment}}</li>
                            </ul>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>