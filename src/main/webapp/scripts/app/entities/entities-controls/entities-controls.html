<div class="controls-row">
    <ul class="controls-list">
        <li ng-if="!vm.isDashboard" ui-sref="experiment">
            <a>
                <em class="fa fa-home"></em>
                <span class="tooltip-icon-header">Home</span>
            </a>
        </li>
        <li uib-dropdown on-toggle="toggled(open)" id="new-entity-dropdown" uib-dropdown-toggle>
            <a>
                <em class="fa fa-file-o"></em>
                <span class="tooltip-icon-header">New Entity</span>
            </a>
            <ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="new-entity-dropdown"
                indigo-has-any-authority="{{vm.ENTITY_CREATORS}}">
                <li indigo-has-any-authority="{{vm.PROJECT_CREATORS}}">
                    <a ui-sref="entities.project-new">New Project</a>
                </li>
                <li indigo-has-any-authority="{{vm.NOTEBOOK_CREATORS}}">
                    <a ng-click="vm.createNotebook()">New Notebook</a>
                </li>
                <li indigo-has-any-authority="{{vm.EXPERIMENT_CREATORS}}">
                    <a ng-click="vm.createExperiment()">New Experiment</a>
                </li>
            </ul>
        </li>
        <li indigo-toggle-class-child="open-menu" ng-hide="true">
            <a>
                <em class="fa fa-arrow-circle-o-up"></em>
                <span class="tooltip-icon-header">Fake Tooltip</span>
            </a>
        </li>
        <li uib-dropdown on-toggle="toggled(open)" id="opened-entities-dropdown" uib-dropdown-toggle>
            <a ng-class="{'disabled' : vm.isDashboard &&  !vm.entities.length}">
                <em class="fa fa-th-large"></em>
                <span class="tooltip-icon-header">Opened Entities</span>
            </a>
            <ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="opened-entities-dropdown">
                <li ng-if="!vm.isDashboard" ng-click="vm.onCloseAllTabs()">
                    <a>Close All</a>
                </li>
                <li ng-if="!vm.isDashboard" ng-click="vm.onCloseNonActiveTabs()">
                    <a>Close All Except Active Entity</a>
                </li>

                <li ng-repeat="entity in vm.entities">
                    <a>
                        <span class="capitalized d-flex" ng-click="vm.onTabClick(entity)" ng-class="{'active' : entity.tabKey === vm.activeTab.tabKey}">
                            <span ng-bind="entity.name + ' '+ entity.$$title"></span>&nbsp;
                        <em class="glyphicon glyphicon-remove text-muted pull-right clickable experiment-tab-close top-3"
                            ng-click="vm.onCloseTabClick($event, entity);"></em>
                        </span>
                    </a>
                </li>
            </ul>
        </li>
        <li ng-click="vm.openSearch()" indigo-has-authority="{{vm.GLOBAL_SEARCH}}">
            <a>
                <em class="fa fa-search"></em>
                <span class="tooltip-icon-header">Search</span>
            </a>
        </li>
        <li>
            <a class="item-null-link"></a>
        </li>
        <li ng-if="!vm.isDashboard">
            <a ng-click="vm.save()" ng-class="{'disabled' : !vm.canSave() }">
                <em class="fa fa-floppy-o"></em>
                <span class="tooltip-icon-header">Save</span>
            </a>
        </li>
        <li ng-if="!vm.isDashboard">
            <a ng-click="vm.duplicate()" ng-class="{'disabled' : !vm.canDuplicate() }">
                <em class="fa fa-files-o"></em>
                <span class="tooltip-icon-header">Duplicate</span>
            </a>
        </li>
        <li ng-if="!vm.isDashboard">
            <a ng-disabled="vm.canUndo()" ng-click="vm.onUndo()">
                <em class="fa fa-mail-reply"></em>
                <span class="tooltip-icon-header">Undo</span>
            </a>
        </li>
        <li ng-if="!vm.isDashboard">
            <a ng-disabled="vm.canRedo()" ng-click="vm.onRedo()">
                <em class="fa fa-mail-forward"></em>
                <span class="tooltip-icon-header">Redo</span>
            </a>
        </li>
        <li ng-if="false">
            <a>
                <em class="fa fa-inbox"></em>
                <span class="tooltip-icon-header">Fake Tooltip</span>
            </a>
        </li>
        <li ng-if="false">
            <a>
                <em class="fa fa-folder-open"></em>
                <span class="tooltip-icon-header">Fake Tooltip</span>
            </a>
        </li>
        <li ng-if="!vm.isDashboard">
            <a ng-click="vm.print()" ng-class="{'disabled' : !vm.canPrint() }">
                <em class="fa fa-print"></em>
                <span class="tooltip-icon-header">Print</span>
            </a>
        </li>
        <li ng-if="!vm.isDashboard">
            <a class="item-null-link"></a>
        </li>
        <li indigo-toggle-class-child="open-menu">
            <a>
                <em class="fa fa-cog"></em>
                <span class="tooltip-icon-header">Fake Tooltip</span>
            </a>
        </li>
        <li indigo-toggle-class-child="open-menu">
            <a>
                <em class="fa fa-question-circle"></em>
                <span class="tooltip-icon-header">Fake Tooltip</span>
            </a>
        </li>
    </ul>
</div>
